{% extends '../base.html' %}

{% block title %} {{ product.product_name}} | RentHub {% endblock %}

{% block content %}

<a href="{% url 'product_list' %}" class="text-decoration-none text-dark"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="my-4 bi bi-arrow-left-square"
		viewBox="0 0 16 16">
		<path d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z" />
</svg></a>
<div class="container">
	<div class="row align-items-start">
		<div class="col-md-6">
			{% if images %}
				<div id="product-images" data-bs-interval="false" class="carousel slide">
					<div class="carousel-inner">
					{% for image in images %}
						<div class="carousel-item {% if forloop.first %}active{% endif %}">
							<img src="{{ image.url }}" class="d-block w-100 object-fit-cover">
						</div>
					{% endfor %}
					</div>
						<button class="carousel-control-prev" type="button" data-bs-target="#product-images" data-bs-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Previous</span>
						</button>
						<button class="carousel-control-next" type="button" data-bs-target="#product-images" data-bs-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Next</span>
						</button>
					</div>
				{% else %}
					<img src="https://www.svgrepo.com/show/508699/landscape-placeholder.svg" alt="No images" class="d-block w-100 object-fit-cover">
				{% endif %}
				</div>
				<div class="col-md-6">
					<h4>{{ product.product_name }}</h4>
					<p>Price: ${{ product.price }}</p>
					<p>Description: {{ product.description }}</p>
					{% if product.user.town %}
						<p>Location: {{ product.user.town }}</p>
					{% else %}
						<p>No location specified.</p>
					{% endif %}
				{% if is_owner %}
				<div>
					<a href="{% url 'product_update' product.id %}" class="btn btn-primary">Edit</a>
					<a href="{% url 'product_delete' product.id %}" class="btn btn-danger">Delete</a>
				</div>
				{% else %}
				<div class="my-2">
					<h5>Rent</h5>
					{% if message %}
							{{ message }}
					{% endif %}
					<form method="post" action="{% url 'rent_product' pk=product.id %}">
						<table>
							{% load crispy_forms_tags %}
							{% crispy form form.helper %}
						</table>
					</form>
			</div>
		{% endif %}
	</div>
</div>

<div class="container">
	<h4 class="my-4">Reviews</h4>
	{% if reviews %}
	<h5>Average Rating: {{ product.get_average }}/5.0</h5>
	{% for review in reviews %}
			<div class="container">
					<h6>{{ review.user }}: {{ review.rating }}.0/5.0</h6>
					<p>{{ review.description }}</p>
			</div>
	{% endfor %}
	{% else %}
	<h5>No reviews</h5>
	{% endif %}
</div>

{% endblock %}
